<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Подбор сплит-системы</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        body { font-family: system-ui, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; background: #f8f9fa; }
        h1 { color: #1a73e8; text-align: center; }
        .card { background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        label { display: block; margin: 16px 0 8px; font-weight: 600; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        button { margin-top: 30px; width: 100%; padding: 16px; background: #1a73e8; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; }
        .result { padding: 30px; background: #e8f4fd; border-radius: 16px; text-align: center; margin-top: 20px; }
        .big { font-size: 56px; font-weight: bold; color: #1a73e8; margin: 10px 0; }
        .model { font-size: 32px; color: #d93025; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Подбор кондиционера по помещению</h1>

        <form hx-post="/calculate" hx-target="#result" hx-swap="outerHTML">
            <label>Площадь помещения (м²)</label>
            <input type="number" name="area" required min="5" placeholder="35">

            <label>Высота потолков (м)</label>
            <input type="number" step="0.1" name="height" value="2.7">

            <label>Солнечная сторона?</label>
            <select name="sun">
                <option value="no">Нет</option>
                <option value="yes">Да</option>
            </select>

            <label>Количество людей</label>
            <input type="number" name="people" required min="0" value="2">

            <label>Мощная техника?</label>
            <select name="equipment" onchange="document.getElementById('ep').style.display=this.value==='yes'?'block':'none'">
                <option value="no">Нет</option>
                <option value="yes">Да</option>
            </select>

            <div id="ep" style="display:none">
                <label>Мощность техники (Вт)</label>
                <input type="number" name="equip_power" placeholder="1500">
            </div>

            <label>Жаркий климат?</label>
            <select name="climate">
                <option value="no">Нет</option>
                <option value="hot">Да</option>
            </select>

            <button type="submit">Рассчитать</button>
        </form>

        <div id="result"></div>
    </div>

    {{define "resultBlock"}}
    <div id="result" class="result">
        <div style="font-size:20px; margin-bottom:10px">Требуемая мощность охлаждения</div>
        <div class="big">{{printf "%.1f" .CoolingKW}} кВт</div>
        <div class="model">{{.Model}}</div>
        <hr style="margin:25px 0; border:none; border-top:2px dashed #aaa;">
        <div style="text-align:left; font-size:15px; color:#555;">{{.Details}}</div>
        <button onclick="location.reload()" style="margin-top:25px; padding:14px 32px; background:#34a853; color:white; border:none; border-radius:12px; font-size:17px;">
            Новый расчёт
        </button>
    </div>
    {{end}}
</body>
</html>